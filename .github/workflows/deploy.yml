name: Deploy via SSH

on:
  workflow_call:
    inputs:
      SSH_USER:
        required: true
        type: string
      SSH_HOST:
        required: true
        type: string
      DEPLOY_SCRIPT:
        required: true
        type: string
    secrets:
      SSH_PRIVATE_KEY:
        required: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Install SSH Client
        run: sudo apt-get install -y openssh-client

#      - name: Set up SSH Key
#        run: |
#          mkdir -p ~/.ssh
#          echo "${{ secrets.SSH_PRIVATE_KEY }}" | tr -d '\r' > ~/.ssh/id_rsa
#          chmod 600 ~/.ssh/id_rsa
#          ssh-keyscan -H ${{ inputs.SSH_HOST }} >> ~/.ssh/known_hosts
#
#      - name: Deploy via SSH
#        run: ssh -o StrictHostKeyChecking=no ${{ inputs.SSH_USER }}@${{ inputs.SSH_HOST }} "${{ inputs.DEPLOY_SCRIPT }}"